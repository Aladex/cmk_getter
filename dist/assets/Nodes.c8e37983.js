import{_ as g,j as k,i as v,k as x,V as N,d as c}from"./VTable.b606e0e6.js";import{Q as t,R as d,U as a,b as h,_ as s,X as u,Y as f,F as p,W as m,V as n,a3 as S,a4 as V}from"./index.527e5517.js";const b={name:"Nodes",data(){return{nodes:{},headers:[{text:"Host",value:"host"},{text:"SSH",value:"is_available"},{text:"Plugins",value:"plugins"}]}},methods:{async getNodes(){const e=await fetch("/api//ssh-nodes");this.nodes=await e.json()},async updatePlugin(e,r){await fetch("/api/deploy-plugin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({node:e,plugin:r})}),this.nodes[e].plugins.forEach(l=>{l.name===r&&(l.loading=!0)}),setTimeout(()=>{this.getNodes(),this.nodes[e].plugins.forEach(l=>{l.name===r&&delete l.loading})},1e4)}},mounted(){this.getNodes()}},w=e=>(S("data-v-28a7d89a"),e=e(),V(),e),C=w(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Name"),s("th",{class:"text-left"},"Plugins"),s("th",{class:"text-left"},"SSH")])],-1));function I(e,r,l,P,_,y){return t(),d(k,{fluid:"",class:"fill-height"},{default:a(()=>[h(N,null,{default:a(()=>[h(v,{cols:"12",md:"10","offset-md":"1"},{default:a(()=>[h(x,{headers:_.headers,items:_.nodes,class:"elevation-1"},{default:a(()=>[C,s("tbody",null,[(t(!0),u(p,null,f(_.nodes,i=>(t(),u("tr",{key:i.name},[s("td",null,m(i.host),1),s("td",null,[s("ul",null,[(t(!0),u(p,null,f(i.plugins,o=>(t(),u("li",{key:o.name,class:"justify-space-between"},[n(m(o.name)+": ",1),o.is_actual===!0?(t(),d(c,{key:0,color:"green"},{default:a(()=>[n("mdi-check")]),_:1})):o.is_actual===!1&&o.loading!==!0?(t(),d(c,{key:1,color:"red",onClick:T=>y.updatePlugin(i.host,o.name)},{default:a(()=>[n("mdi-close")]),_:2},1032,["onClick"])):(t(),d(c,{key:2,color:"blue",class:"loading"},{default:a(()=>[n("mdi-loading")]),_:1}))]))),128))])]),s("td",null,[i.is_available?(t(),d(c,{key:0},{default:a(()=>[n("mdi-check")]),_:1})):(t(),d(c,{key:1},{default:a(()=>[n("mdi-close")]),_:1}))])]))),128))])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})}const E=g(b,[["render",I],["__scopeId","data-v-28a7d89a"]]);export{E as default};
